ุฅููู ููุฎุต ุณุฑูุน ูุดุงูู ูููุธุงู ุงูุฐู ูููุง ุจุจูุงุฆูุ ูุงูุฐู ุชุญูู ูู ูุฌุฑุฏ "ุฃุฏุงุฉ ุนุฑุถ" ุฅูู **"ูุญุฑู ุชุณุนูุฑ ุฐูู ูุนุชูุฏ ุนูู ุงูุจูุงูุงุช" (Data-Driven Cost Engine)**.

### ๐ ููุณูุฉ ุงููุธุงู
ุงููุธุงู ูุง ูุญุชูู ุนูู ููุฏ ุจุฑูุฌู ูููู "ุงุถุฑุจ ุงูุณุนุฑ ูู ุงููููุฉ". ุจุฏูุงู ูู ุฐููุ ุงููุธุงู ูู **"ูุญุฑู ุนุงู"** ููุฑุฃ ุงูุชุนูููุงุช ูู ุงูุฌุฏุงูู ุงูุฎูุณุฉ ููููุฐูุง. ูุฐุง ูููุญู ูุฑููุฉ ูุทููุฉ ูุชุบููุฑ ุทุฑููุฉ ุงูุนูู ุฏูู ุชุนุฏูู ุงูุจุฑูุงูุฌ.

---

### ุฃููุงู: ุงูุฌุฏุงูู ุงูู 5 ุงูุฑุฆูุณูุฉ (ุงูุฌุฏุงูู ุงูุญุงููุฉ - System Tables)
ูุฐู ุงูุฌุฏุงูู ูู **"ุงูุฏุณุชูุฑ"** ุงูุฐู ูุญูู ุงููุธุงู.

| # | ุงูุฌุฏูู | ุงูููุจ | ุงูุฏูุฑ ูุงููุธููุฉ |
| :--- | :--- | :--- | :--- |
| **1** | **`SYS_DEFINITIONS`** | **ุงูุณุฌู (Registry)** | **ูููู ูููุธุงู ูู ูุญูุ**<br>ูุนุฑู ูู ุงูุฌุฏุงูู ุงูููุฌูุฏุฉ (ุฎุงูุงุชุ ุนูุงูุฉุ ุชุญููู). ูุญุฏุฏ ุดูููุง (ุฃููุงูุ ุฃููููุงุช) ูููุนูุง (ูุงููุ ุฅูุชุงุฌู). |
| **2** | **`SYS_SCHEMA_RULES`** | **ุงูููุงุตูุงุช (Specs)** | **ูููู ูููุธุงู ููุง ูุชูููุ**<br>ูุญุฏุฏ ุฃุนูุฏุฉ ูู ุฌุฏูู. ูุงูุฃูู ุฃูู ูุญุฏุฏ **ุงูุฏูุฑ ุงูุฏูุงูู** (ูุฐุง ุงูุนููุฏ ูู ุงูุณุนุฑุ ูุฐุง ูู ุงููููุฉ) ููููู ุงููุญุฑู ุงูุฃุฑูุงู. |
| **3** | **`SYS_DATA_SOURCES`** | **ุงูุจูุงุจุฉ (Gateway)** | **ูููู ูููุธุงู ูู ุฃูู ูุฃุชู ุจุงูุจูุงูุงุชุ**<br>ูุญุชูู ุนูู ุฑูุงุจุท Google Sheetsุ ููุญูู **ุงูุฐูุงุก ุงูุงูุชุตุงุฏู** (ุนููุฉ ุงููููุ ุฏููุชูุ ุฃููููุชู). |
| **4** | **`SYS_DATA_MAP`** | **ุงููุชุฑุฌู (Translator)** | **ูููู ูููุธุงู ููู ููุฑุฃ ุงููููุ**<br>ูุญู ูุดููุฉ ุงุฎุชูุงู ุงูุฃุณูุงุก (ูุซูุงู: ุงูููุฑุฏ ูุณููู "Cost" ููุญู ูุณููู "UNIT_PRICE"). ููุธู ุงูุจูุงูุงุช ูุจู ุฏุฎูููุง. |
| **5** | **`SYS_DATA_MODEL`** | **ุงููุฎ (The Brain)** | **ูููู ูููุธุงู ููู ูุญุณุจ ููุฑุจุทุ**<br>ูุฑุจุท ุงูุจูุฏ ุจููููุงุชู. ููุฑุฑ ุงููุนุงุฏูุฉ: "ููุฎุงูุงุช ุงุถุฑุจ ูู ุงููููุฉ"ุ ู "ููุนูุงูุฉ ุงูุณู ุนูู ุงูุฅูุชุงุฌูุฉ". |

---

### ุซุงููุงู: ุงูุฌุฏุงูู ุงููุฑุนูุฉ (ุงูุฌุฏุงูู ุงูุชุดุบูููุฉ - Operational Tables)
ูุฐู ุงูุฌุฏุงูู ูู **"ุณุงุญุฉ ุงูุนูู"** ุงูุชู ูุชู ูููุง ุชุฎุฒูู ุงูุจูุงูุงุช ุงููุนููุฉ ูููุดุฑูุน. ูุชู ุชุนุฑูู ูููููุง ูู ุงูุฌุฏูู ุฑูู 1 ู 2 ุฃุนูุงู.

| ุงูุฌุฏูู | ุงูุฏูุฑ ูุงููุธููุฉ |
| :--- | :--- |
| **`T_BOQ_BREAKDOWN`** | **ุทุงููุฉ ุงูุนูู (Workspace)**<br>ูุฐุง ูู ุงูุฌุฏูู ุงูุฐู ูุฌูุน ูู ุดูุก. ูุญุชูู ุนูู ุจููุฏ ุงูููุงูุณุฉ ูููููุงุชูุง (ุฎุงูุฉ/ุนูุงูุฉ) ูุงูุฃุณุนุงุฑ ุงูููุงุฆูุฉ ุจุนุฏ ุงูุญุณุงุจ. ูู ุงูุฌุฏูู ุงูุฐู ูุฑุงู ุงููุณุชุฎุฏู ููุนุฏู ุนููู. |
| **`T_PROJECT_PARAMS`** | **ููุญุฉ ุงูุชุญูู (Dashboard)**<br>ูุฎุฒู ุงููุชุบูุฑุงุช ุงูุนุงูุฉ ูููุดุฑูุน ูุซู: (ูุณุจุฉ ุงูุถุฑูุจุฉุ ูุงูุด ุงูุฑุจุญุ ุณุนุฑ ุงูุฏููุงุฑุ ุณุนุฑ ุงููููุฏ). ุงููุนุงุฏูุงุช ุชูุฑุฃ ููู ูุจุงุดุฑุฉ. |
| **`STD_ASSEMBLIES`** | **ุงูููุชุจุฉ (Library)**<br>(ููู Google Sheet) ูุญุชูู ุนูู "ุงููุตูุงุช ุงูููุงุณูุฉ" ููุจููุฏ (ูุชุฑ ุงูุฎุฑุณุงูุฉ ูุญุชุงุฌ ูุฐุง ููุฐุง). ุงููุธุงู ููุณุฎ ููู ูุฅูุดุงุก `T_BOQ_BREAKDOWN`. |
| **`T_MATERIALS` / `T_LABOR`** | **ุงููุฎุงุฒู (Stores)**<br>ุฌุฏุงูู ูุญููุฉ ูุชู ููุคูุง ูู ูููุงุช ุงูููุฑุฏูู (ุนุจุฑ ุงููุตุงุฏุฑ)ุ ููููู ุงููุธุงู ุจุงูุจุญุซ ูููุง ูุฌูุจ ุงูุฃุณุนุงุฑ ุงูุญุงููุฉ. |

---

### ๐ ุฏูุฑุฉ ุญูุงุฉ ุงูุนูููุฉ (The Flow)

1.  **ุงูุจุฏุงูุฉ:** ุงูููุฏ ููุฑุฃ **ุงูู 5 ุฌุฏุงูู ุงูุฑุฆูุณูุฉ** ููููู ุงููููู.
2.  **ุงูุงุชุตุงู:** ูุณุญุจ ุงูุจูุงูุงุช ูู ุฑูุงุจุท **Sources** ููุชุฑุฌููุง ุนุจุฑ **Maps** ููุฎุฒููุง ูู **Materials/Labor**.
3.  **ุงูุชุฌููุฒ:** ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุจูุฏุงูุ ูุงููุธุงู ููุณุฎ ูุตูุชู ูู **Library** ููุถุนูุง ูู **BOQ_Breakdown**.
4.  **ุงูุญุณุงุจ:** ุงููุธุงู ููุธุฑ ูู **Model** ููุนุฑู ููู ูุญุณุจุ ููุฃุฎุฐ ุงููุชุบูุฑุงุช ูู **Params**ุ ููุฃุฎุฐ ุงูุฃุณุนุงุฑ ูู **Materials**ุ ููุฎุฑุฌ ุงูุฑูู ุงูููุงุฆู.



ูุฐุง ูู ุงููุซุงู ุงูุนููู ุงููุงูู **(The Full Cycle Scenario)** ูุชุญููู ุจูุฏ "ุฎุฑุณุงูุฉ ูุณูุญุฉ C30".

ุณููุฑ ุจู **10 ุฌุฏุงูู** (5 ุฌุฏุงูู ูููุธุงู + 5 ุฌุฏุงูู ุชุดุบูููุฉ) ููุฑู ููู ูุชุญูู ุงูุณุทุฑ ูู ูุฌุฑุฏ "ูุต ูู Google Sheet" ุฅูู "ุณุนุฑ ููุงุฆู ูู ุชูุฑูุฑู".

---

### ุงููุฑุญูุฉ ุงูุฃููู: ุงูุฅุนุฏุงุฏ ูุงูุชุนุฑูู (Setup Phase)
*ูุจู ุฃู ูุจุฏุฃ ุงูุจุฑูุงูุฌุ ูุญู "ุนูููุงู" ููู ูููุฑ.*

#### 1. ุฌุฏูู `SYS_DEFINITIONS` (ุจุทุงูุฉ ุงููููุฉ)
ูุนุฑู ุงูุฌุฏุงูู ุงูุชู ุณูุณุชุฎุฏููุง.
| ENTITY_KEY | TYPE | DISPLAY_NAME |
| :--- | :--- | :--- |
| **`T_MATERIALS`** | `COST` | ุฃุณุนุงุฑ ุงูุฎุงูุงุช |
| **`T_LABOR`** | `PERF` | ุฅูุชุงุฌูุฉ ุงูุนูุงูุฉ |
| **`T_BOQ_BREAKDOWN`** | `COMP` | ุชุญููู ุงูุจูุฏ (ุงููุชูุฌุฉ ุงูููุงุฆูุฉ) |

#### 2. ุฌุฏูู `SYS_SCHEMA_RULES` (ุงูููุงุตูุงุช)
ูุนุฑู ุงูุฃุนูุฏุฉ ููุนูุงูุง (Semantics).
| ENTITY | ATTRIBUTE | SEMANTIC |
| :--- | :--- | :--- |
| `T_MATERIALS` | `UNIT_PRICE` | **`PRICE`** |
| `T_BOQ_BREAKDOWN`| `CONSUMPTION`| **`QTY`** |
| `T_BOQ_BREAKDOWN`| `TOTAL_COST` | **`TOTAL`** |

---

### ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุงููุฏุฎูุงุช ุงูุฎุงุฑุฌูุฉ (Data Injection)
*ูุฐู ูููุงุช Google Sheets ุงูุชู ููุช ุฃูุช ุจููุฆูุง.*

#### 3. ุฌุฏูู `SRC_RAW_MATERIALS` (ููู ุงูููุฑุฏ - Google Sheet)
ููู ุฎุงู ูู ููุฑุฏ ุฃุณููุช (ูุงุญุธ ุงุณู ุงูุนููุฏ ูุฎุชูู).
| Code | Item Name | **Market_Rate** |
| :--- | :--- | :--- |
| `MAT-01` | ุฃุณููุช ุจูุฑุชูุงูุฏู | **4,000** |
| `MAT-02` | ุฑูู ุฃุตูุฑ | **150** |

#### 4. ุฌุฏูู `SRC_RAW_LABOR` (ููู ุงูุนูุงูุฉ - Google Sheet)
| Code | Job Type | Daily_Cost | Productivity |
| :--- | :--- | :--- | :--- |
| `LAB-01` | ุทุงูู ุตุจ | 1,500 | 15 (ู3/ููู) |

#### 5. ุฌุฏูู `STD_ASSEMBLIES` (ุงูููุชุจุฉ ุงููุนูุงุฑูุฉ - Google Sheet)
ูุชุงุจ ุงููุตูุงุช: "ูู ูุชููู ูุชุฑ ุงูุฎุฑุณุงูุฉุ"
| PARENT_ITEM | RES_TYPE | RES_ID | STD_QTY |
| :--- | :--- | :--- | :--- |
| `CONC_C30` | `MAT` | `MAT-01` | 0.350 |
| `CONC_C30` | `MAT` | `MAT-02` | 0.400 |
| `CONC_C30` | `LAB` | `LAB-01` | 1.000 |

---

### ุงููุฑุญูุฉ ุงูุซุงูุซุฉ: ุงููุญุฑู ูุงูุฑุจุท (The Engine)
*ููู ูููู ุงููุธุงู ูุฐู ุงููููุงุชุ*

#### 6. ุฌุฏูู `SYS_DATA_SOURCES` (ุงูุจูุงุจุฉ)
ูุฑุจุท ุงููููุงุช ุจุงููุธุงู ููุญุฏุฏ ุงูุณูุงู ุงูุงูุชุตุงุฏู.
| SOURCE_KEY | TARGET | URI | CONTEXT_PROPS |
| :--- | :--- | :--- | :--- |
| `SRC_EZZ` | `T_MATERIALS` | `https://...` | `{"Currency": "EGP"}` |

#### 7. ุฌุฏูู `SYS_DATA_MAP` (ุงููุชุฑุฌู)
ุญู ูุดููุฉ ุงุฎุชูุงู ุงูุฃุณูุงุก ูู ุงูููู ุฑูู (3).
| PROFILE | TARGET_ATTR | SOURCE_EXPR |
| :--- | :--- | :--- |
| `MAP_EZZ` | **`UNIT_PRICE`** | **`Market_Rate`** |
*(ุงูุขู ุงููุธุงู ููู ุฃู ุงูู 4000 ูู ุงูุณุนุฑ)*.

#### 8. ุฌุฏูู `SYS_DATA_MODEL` (ุงููุฎ ูุงูุนูุงูุงุช)
ููู ูุญุณุจ ุงูุชูููุฉุ
| RELATION | TYPE | LOGIC |
| :--- | :--- | :--- |
| `LINK_MAT` | `POLYMORPHIC` (If `MAT`) | `MULTIPLY` (Price * Qty) |
| `LINK_LAB` | `POLYMORPHIC` (If `LAB`) | `DIVIDE` (Rate / Prod) |

#### 9. ุฌุฏูู `T_PROJECT_PARAMS` (ุงููุชุบูุฑุงุช)
ูุณุจ ุงููุดุฑูุน ุงูุญุงููุฉ.
| KEY | VALUE |
| :--- | :--- |
| `PROFIT_MARGIN` | `20%` |

---

### ุงููุฑุญูุฉ ุงูุฑุงุจุนุฉ: ุงููุชูุฌุฉ ุงูููุงุฆูุฉ (The Output)
*ูุงุฐุง ุญุฏุซ ุนูุฏูุง ุถุบุท ุงููุณุชุฎุฏู "ุชุญููู ุจูุฏ ุงูุฎุฑุณุงูุฉ"ุ*

1.  ุงูููุฏ ุฐูุจ ูู `STD_ASSEMBLIES` (5) ููุณุฎ ุงูููููุงุช.
2.  ููู ููููุ ุฐูุจ ูู `SYS_DATA_MODEL` (8) ููุนุฑู ููู ูุญุณุจ.
3.  **ููุฃุณููุช (`MAT`):**
    *   ุฌูุจ ุงูุณุนุฑ **4000** ูู `T_MATERIALS` (ุงูุฐู ุชูุฑุฌู ูู ุงููุตุฏุฑ 3).
    *   ุทุจู ูุนุงุฏูุฉ ุงูุถุฑุจ: `4000 * 0.350` = **1400**.
4.  **ููุนูุงูุฉ (`LAB`):**
    *   ุฌูุจ ุงูููููุฉ **1500** ูุงูุฅูุชุงุฌูุฉ **15** ูู `T_LABOR`.
    *   ุทุจู ูุนุงุฏูุฉ ุงููุณูุฉ: `1500 / 15` = **100**.
5.  **ุชุทุจูู ุงูุฃุฑุจุงุญ:**
    *   ูุฑุฃ `PROFIT_MARGIN` ูู (9).
    *   ุงูุฅุฌูุงูู = `(1400 + 60 + 100) * 1.20`.

#### 10. ุฌุฏูู `T_BOQ_BREAKDOWN` (ุงูุฌุฏูู ุงูููุงุฆู ูููุณุชุฎุฏู)
ูุฐุง ูุง ูุธูุฑ ูู ุดุงุดุฉ ุงููุณุชุฎุฏู ุฃู ุงูุฅูุณู.

| ุงูููุน | ุงูุจูุงู | ุงููุญุฏุฉ | ุงููููุฉ/ูุนุฏู | ุงูุณุนุฑ ุงูุฃุณุงุณู | ุงูุชูููุฉ ุงููุจุงุดุฑุฉ |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **ุฎุงูุฉ** | ุฃุณููุช ุจูุฑุชูุงูุฏู | ุทู | 0.350 | 4,000.00 | **1,400.00** |
| **ุฎุงูุฉ** | ุฑูู ุฃุตูุฑ | ู3 | 0.400 | 150.00 | **60.00** |
| **ุนูุงูุฉ** | ุทุงูู ุตุจ | ููููุฉ | 15 (ุฅูุชุงุฌูุฉ) | 1,500.00 | **100.00** |
| | | | | | |
| **ุงูุฅุฌูุงูู** | **ุณุนุฑ ุงููุชุฑ ุงูููุนุจ** | | | **ุดุงูู ุงูุฑุจุญ (20%)**| **1,872.00** |

---

### ุงูุฎูุงุตุฉ
ููุฏ ูุฑ ุงูุฑูู **4000** (ุณุนุฑ ุงูุฃุณููุช) ุจุฑุญูุฉ ุนุจุฑ:
*   ูุตุฏุฑ ุฎุงุฑุฌู (`Sources`).
*   ุชุฑุฌูุฉ ุงุณู ุงูุนููุฏ (`Map`).
*   ุชุฎุฒูู ูู ุฌุฏูู ูุญูู (`Definitions` + `Schema`).
*   ุงุณุชุฏุนุงุก ุนุจุฑ ุนูุงูุฉ ุฐููุฉ (`Model`).
*   ุฏูุฌ ูุน ูุตูุฉ ูุนูุงุฑูุฉ (`Assemblies`).
*   ุชุทุจูู ูุณุจ ูุดุฑูุน (`Params`).
*   ููุณุชูุฑ ูู ุงูููุงูุฉ ูู ุฌุฏูู ุงูุชุญููู (`Breakdown`).

**ูุฐุง ูู ูุนูู Data-Driven Application.**
