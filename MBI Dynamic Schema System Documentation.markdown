ุฅููู ุงูุชูุซูู ุงูููู ุงููุงูู (Technical Documentation) ูููุธุงู.
ูุฐุง ุงููุณุชูุฏ ูุนุชุจุฑ ุงููุฑุฌุน ุงูุฃุณุงุณู ูุฃู ูุทูุฑ ุฃู ูุฏูุฑ ุจูุงูุงุช ุณูุชุนุงูู ูุน ุงูู Backend ุงูุฎุงุต ุจุงููุดุฑูุน.

---

# ๐ MBI Dynamic Schema System Documentation
**Version:** 1.0.0
**Role:** Defines the logic, structure, and sources of the MBI Pricing Tool data engine.

---

## 1. Sheet: `SYS_DEFINITIONS` (ุชุนุฑูู ุงูุฃููุงุน)
**ุงููุธููุฉ:** ูุฐุง ุงูุฌุฏูู ูู "ุงูุฏุณุชูุฑ". ูุญุฏุฏ ุฃููุงุน ุงูุจูุงูุงุช (Entities) ุงูุชู ูุฏุนููุง ุงููุธุงู ูุณููููุง ุงูุนุงู. ูุง ูุชู ุฅูุดุงุก ุฃู ุฌุฏูู ูู ุงููุธุงู ูุง ูู ููู ููุนู ูุนุฑูุงู ููุง.

| ุงุณู ุงูุนููุฏ (Column) | ุงูุญุงูุฉ (Status) | ุงููุตู ูุงูุฏูุฑ (Description) |
| :--- | :--- | :--- |
| **`Def_Key`** | **Mandatory (PK)** | ุงูููุชุงุญ ุงูุจุฑูุฌู ููููุน. ูุณุชุฎุฏู ููุฑุจุท ูุน ุจุงูู ุงูุฌุฏุงูู. ูุฌุจ ุฃู ูููู ูุฑูุฏุงู ูุจุงูุฅูุฌููุฒูุฉ. <br>*(ูุซุงู: `CAT_MAT`, `CAT_LABOR`)* |
| **`Parent_Def_Key`** | Optional | ูููุฑุงุซุฉ. ุฅุฐุง ูุถุนูุง ููุง ููุฏ ููุน ุขุฎุฑุ ุณูุฑุซ ูุฐุง ุงูููุน ูู ุฃุนูุฏุชู. ูููุฑ ุชูุฑุงุฑ ุงูุฅุฏุฎุงู. <br>*(ูุซุงู: `CAT_STEEL` ูุฑุซ ูู `CAT_MAT`)* |
| **`Display_Name`** | **Mandatory** | ุงูุงุณู ุงูุฐู ูุธูุฑ ูููุณุชุฎุฏู ุงูููุงุฆู ูู ูุงุฌูุฉ ุงูุจุฑูุงูุฌ. |
| **`Super_Category`** | **Mandatory** | ุงูุชุตููู ุงูุฃุนูู ููุชูุธูู ูุงูููุชุฑุฉ. ุงูููู ุงููุณููุญุฉ: `RESOURCE`, `CONTEXT`, `SYSTEM`, `PRODUCTIVITY`. |
| **`Sort_Order`** | Optional | ุฑูู ุตุญูุญ ูุญุฏุฏ ุชุฑุชูุจ ุธููุฑ ุงูููุน ูู ุงูููุงุฆู. ุงูุงูุชุฑุงุถู: `0`. |
| **`Icon_Name`** | Optional | ุงุณู ุงูุฃููููุฉ ูู ูููุงุช ุงูู Resources ูุนุฑุถูุง ูู ุงููุงุฌูุฉ. |
| **`Behavior_Tags`** | Optional | ูุณูู ููุตููุฉ ุจููุงุตู ูุชูุนูู ููุฒุงุช ุจุฑูุฌูุฉ ุฎุงุตุฉ. <br>*(ุฃูุซูุฉ: `HAS_PRICE`, `WASTABLE`, `FORECAST_ENABLED`)* |
| **`Cache_Policy`** | **Mandatory** | ูุญุฏุฏ ุณุฑุนุฉ ุชุญุฏูุซ ุงูุจูุงูุงุช. <br>*(ุงูููู: `VOLATILE` (ููููุงู), `NORMAL` (ุฃุณุจูุนูุงู), `STATIC` (ุดูุฑูุงู))* |
| **`Access_Level`** | **Mandatory** | ูุญุฏุฏ ูู ูุฑู ูุฐุง ุงูุชุตููู. <br>*(ุงูููู: `FREE`, `PREMIUM`, `ADMIN`)* |
| **`UI_View_Mode`** | **Mandatory** | ููุฌู ุงูู UI ูููููุฉ ุฑุณู ุงูุจูุงูุงุช. <br>*(ุงูููู: `GRID`, `TREE`, `FORM`, `CALCULATOR`)* |
| **`ID_Prefix_Rule`** | Optional | ูุต ููุถุน ุชููุงุฆูุงู ูุจู ุงูููุฏ ุนูุฏ ุฅุถุงูุฉ ุนูุตุฑ ุฌุฏูุฏ ูุฏููุงู. <br>*(ูุซุงู: `MAT-`, `LAB-`)* |
| **`Color_Hex`** | Optional | ููุฏ ุงูููู (Hex) ูุชูููุฒ ุงูููุน ูู ุงูุชูุงุฑูุฑ ูุงูุฑุณูู ุงูุจูุงููุฉ. |
| **`Is_Active`** | **Mandatory** | `TRUE` ุฃู `FALSE`. ูุฅุฎูุงุก ุงูููุน ุจุงููุงูู ูู ุงููุธุงู ูุคูุชุงู. |

---

## 2. Sheet: `SYS_SCHEMA_RULES` (ููุงููู ุงูุฃุนูุฏุฉ)
**ุงููุธููุฉ:** "ุงููููุฏุณ ุงููุนูุงุฑู". ูุญุฏุฏ ุงููููู (ุงูุฃุนูุฏุฉ) ููู ููุน ุชู ุชุนุฑููู ูู ุงูุฌุฏูู ุงูุณุงุจู.

| ุงุณู ุงูุนููุฏ (Column) | ุงูุญุงูุฉ (Status) | ุงููุตู ูุงูุฏูุฑ (Description) |
| :--- | :--- | :--- |
| **`Def_Key`** | **Mandatory (FK)** | ูุฑุจุท ูุฐุง ุงูุนููุฏ ุจููุน ูุนูู ูู `SYS_DEFINITIONS`. |
| **`Col_Key`** | **Mandatory** | ุงูุงุณู ุงูุจุฑูุฌู ููุนููุฏ ูู ูุงุนุฏุฉ ุจูุงูุงุช SQLite. ูุฌุจ ุฃู ูููู ุจุงูุฅูุฌููุฒูุฉ ูุจุฏูู ูุณุงูุงุช. <br>*(ูุซุงู: `Unit_Price`)* |
| **`Display_Name`** | **Mandatory** | ุนููุงู ุงูุนููุฏ ุงูุฐู ูุธูุฑ ูู ุฑุฃุณ ุงูุฌุฏูู (Header) ูู ุงูุฅูุณู. |
| **`Data_Type`** | **Mandatory** | ููุน ุงูุจูุงูุงุช. <br>*(ุงูููู: `Text`, `Real`, `Integer`, `Date`, `Bool`)* |
| **`Sort_Order`** | Optional | ุชุฑุชูุจ ุงูุนููุฏ ูู ุงููุณุงุฑ ูููููู. ุงูุงูุชุฑุงุถู: ุญุณุจ ุงูุชุฑุชูุจ ูู ุงูุดูุช. |
| **`Is_Primary`** | **Mandatory** | `TRUE` ุฅุฐุง ูุงู ูุฐุง ุงูุนููุฏ ูู ุงูููุชุงุญ ุงูุฃุณุงุณู (ูููุน ุงูุชูุฑุงุฑ). |
| **`Is_Required`** | **Mandatory** | `TRUE` ูุฑูุถ ุฃู ุตู ูุง ูุญุชูู ุนูู ูููุฉ ูู ูุฐุง ุงูุนููุฏ. |
| **`Default_Value`** | Optional | ูููุฉ ุชูุถุน ุชููุงุฆูุงู ุฅุฐุง ูุงูุช ุงูุฎููุฉ ูุงุฑุบุฉ. <br>*(ูุซุงู: `0` ููุฃุฑูุงู, `Unknown` ูููุตูุต)* |
| **`Is_Global_Append`** | **Mandatory** | `TRUE` ูุฏูุฌ ูุฐุง ุงูุนููุฏ ุนูุฏ ุชุฌููุน ุฌุฏุงูู ูุชุนุฏุฏุฉ (Select All). ุงูุฃุนูุฏุฉ ุงููุญููุฉ ุชููู `FALSE`. |
| **`License_Tier`** | **Mandatory** | ุชุญุฏูุฏ ูุณุชูู ุงููุตูู ููุนููุฏ ุงููุงุญุฏ. <br>*(ูุซุงู: ุนููุฏ ุงูุชูุจุคุงุช ูููู `PREMIUM`)* |
| **`Is_Visible`** | **Mandatory** | `TRUE` ูุฅุธูุงุฑู ูููุณุชุฎุฏู. `FALSE` ููุฃุนูุฏุฉ ุงูุฏุงุฎููุฉ (ูุซู ุงููุนุฑูุงุช ุงููุฎููุฉ). |
| **`Is_Editable`** | **Mandatory** | `TRUE` ููุณูุงุญ ูููุณุชุฎุฏู ุจุชุนุฏูู ุงููููุฉ ูุฏููุงู ุฏุงุฎู ุงูุจุฑูุงูุฌ. |
| **`UI_Width`** | Optional | ุนุฑุถ ุงูุนููุฏ ุจุงูุจูุณู ููุชุญูู ูู ุดูู ุงูุดุจูุฉ. |
| **`Format_String`** | Optional | ุชูุณูู ุงูุนุฑุถ (Format String). <br>*(ูุซุงู: `N2` ููุฃุฑูุงู, `dd/MM/yyyy` ููุชุงุฑูุฎ)* |
| **`Validation_Rule`** | Optional | ููุงุนุฏ ููุชุญูู ูู ุตุญุฉ ุงููุฏุฎูุงุช. <br>*(ุฃูุซูุฉ: `MIN:0`, `LIST:m3,ton,kg`, `MAX:100`)* |
| **`Aggregation_Type`** | Optional | ุทุฑููุฉ ุชุฌููุน ุงูุนููุฏ ูู ุงูุชูุงุฑูุฑ. <br>*(ุงูููู: `SUM`, `AVG`, `MAX`, `MIN`, `NONE`)* |

---

## 3. Sheet: `MASTER_DIRECTORY` (ุฏููู ุงููููุงุช)
**ุงููุธููุฉ:** "ุงูุฃุฑุดูู". ูุณุฑุฏ ุงููููุงุช ุงููุนููุฉ (Data Sources) ูููุงูุนูุง ุนูู ุงูุฅูุชุฑูุช.

| ุงุณู ุงูุนููุฏ (Column) | ุงูุญุงูุฉ (Status) | ุงููุตู ูุงูุฏูุฑ (Description) |
| :--- | :--- | :--- |
| **`Table_Key`** | **Mandatory (PK)** | ุงูุงุณู ุงูููุฒูุงุฆู ููุฌุฏูู ูู SQLite. ูุฌุจ ุฃู ูููู ูุฑูุฏุงูุ ุฅูุฌููุฒูุ ุจุฏูู ูุณุงูุงุช. |
| **`Def_Key`** | **Mandatory (FK)** | ููุน ุงูุฌุฏูู. ูุญุฏุฏ ูุง ูู ุงูููุงุนุฏ (ุงูุฃุนูุฏุฉ) ุงูุชู ุณุชุทุจู ุนููู. |
| **`Display_Name`** | **Mandatory** | ุงูุงุณู ุงูุธุงูุฑ ูููุณุชุฎุฏู ูู ุดุฌุฑุฉ ุงุฎุชูุงุฑ ุงูุจูุงูุงุช. |
| **`Source_Url`** | **Mandatory** | ุฑุงุจุท ูุจุงุดุฑ ูููู ุงูุจูุงูุงุช (ูุฌุจ ุฃู ูููู ุจุตูุบุฉ TSV). |
| **`Region_Code`** | Optional | ููุฏ ุงูููุทูุฉ ููููุชุฑุฉ ุงูุฌุบุฑุงููุฉ. <br>*(ุฃูุซูุฉ: `EG`, `SA`, `UAE`, `GLOBAL`)* |
| **`Provider_Name`** | Optional | ุงุณู ูุตุฏุฑ ุงูุจูุงูุงุช ูุบุฑุถ ุงููุตุฏุงููุฉ. |
| **`Version`** | **Mandatory** | ุฑูู ุงูุฅุตุฏุงุฑ. ุฃู ุชุบููุฑ ููุง ูุคุฏู ูุฅุนุงุฏุฉ ุชุญููู ุงูุฌุฏูู ุชููุงุฆูุงู. |
| **`Access_Tier`** | **Mandatory** | ูุณุชูู ุงููุตูู ููุฌุฏูู ููู. <br>*(ุงูููู: `FREE`, `PREMIUM`)* |
| **`Map_Group_Key`** | Optional | ููุฏ ุชุฌููุนู ูุฑุจุท ุนุฏุฉ ุฌุฏุงูู ุจุฎุฑูุทุฉ ุชุฑุฌูุฉ ูุงุญุฏุฉ (ูุชูุงุฏู ุงูุชูุฑุงุฑ). |
| **`Update_Frequency`** | Optional | ูุชุฌุงูุฒ ุณูุงุณุฉ ุงูุชุญุฏูุซ ุงูุงูุชุฑุงุถูุฉ ุงูุฎุงุตุฉ ุจุงูููุน. |
| **`Is_Active`** | **Mandatory** | `TRUE` ูุชูุนูู ุงูุฌุฏููุ `FALSE` ูุฅููุงูู ุฏูู ุญุฐูู ูู ุงูุณุฌู. |

---

## 4. Sheet: `SYS_DATA_MAP` (ุงููุชุฑุฌู)
**ุงููุธููุฉ:** ุฑุจุท ุงูุจูุงูุงุช ุงูุฎุงู (Raw Data) ุจุงูุฃุนูุฏุฉ ุงูููุงุณูุฉ ูููุธุงู.

| ุงุณู ุงูุนููุฏ (Column) | ุงูุญุงูุฉ (Status) | ุงููุตู ูุงูุฏูุฑ (Description) |
| :--- | :--- | :--- |
| **`Table_Key`** | **Mandatory** | ูุญุฏุฏ ุงูุฌุฏูู ุงููุณุชูุฏู (ูุฌุจ ุฃู ูุทุงุจู `Table_Key` ูู ุงูุฏููู). <br>*ููุงุญุธุฉ: ูููู ุงุณุชุฎุฏุงู `Map_Group_Key` ููุง ุจุฏูุงู ููู ูุณุชูุจูุงู.* |
| **`Raw_Header`** | Conditional | ุงุณู ุงูุนููุฏ ูู ููู ุงูุฅูุณู ุงูุฃุตูู. <br>*ุงุฌุจุงุฑู: ุฅุฐุง ูู ููู ููุงู `Static_Value`.* |
| **`Target_Col_Key`** | **Mandatory** | ุงุณู ุงูุนููุฏ ุงูููุงุณู ุงููุณุชูุฏู. ูุฌุจ ุฃู ูููู ูุนุฑูุงู ูู `SYS_SCHEMA_RULES`. |
| **`Static_Value`** | Conditional | ูููุฉ ุซุงุจุชุฉ ูุชู ุญูููุง ูู ูู ุงูุตููู ุฅุฐุง ูู ููุฌุฏ ุนููุฏ ููุงุจู ูู ุงูููู ุงูุฃุตูู. <br>*ุงุฌุจุงุฑู: ุฅุฐุง ูู ููุฌุฏ `Raw_Header`.* |
| **`Transform_Rule`** | Optional | ุฏุงูุฉ ุชุญููู ุจุณูุทุฉ ูุชูุธูู ุงูุจูุงูุงุช ุฃุซูุงุก ุงูุชุญููู. <br>*(ุฃูุซูุฉ: `TRIM`, `UPPER`, `TO_NUMBER`)* |

---

### ููุงุญุธุงุช ูุงูุฉ ููุชูููุฐ:
1.  **ุงูุชุฑุชูุจ:** ูุฌุจ ุชุนุจุฆุฉ ุงูุฌุฏุงูู ุจุงูุชุฑุชูุจ ุงููุฐููุฑ (1 ุซู 2 ุซู 3 ุซู 4) ูุถูุงู ุณูุงูุฉ ุงูุนูุงูุงุช (Foreign Keys).
2.  **ุญุงูุฉ ุงูุฃุญุฑู:** ุงูุฃููุงุฏ (`Keys`) ุญุณุงุณุฉ ูุญุงูุฉ ุงูุฃุญุฑูุ ููุถู ุงุณุชุฎุฏุงู **UPPER_CASE_SNAKE** ุฏุงุฆูุงู (ูุซู `CAT_MAT`).
3.  **ุงููุดุฑ:** ุชุฃูุฏ ูู ูุดุฑ ุฌููุน ูุฐู ุงูุดูุชุงุช ุจุตูุบุฉ **TSV** (Tab Separated Values) ูุถูุงู ุณุฑุนุฉ ุงููุฑุงุกุฉ.
