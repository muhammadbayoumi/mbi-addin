ุฅููู ุงูุชุตููู ุงููุงูู ูุงูุดุงูู ูุฃุนูุฏุฉ ุฌุฏูู **`T_BOQ_BREAKDOWN`** (ุฌุฏูู ุชุญููู ุงูุจููุฏ).

ูุฐุง ุงูุฌุฏูู ูู "ุงูุนููุฏ ุงูููุฑู" ููุจูุงูุงุช ูู ูุธุงูู. ูู ุงูุฐู ูุฌูุน ุจูู "ูุตูุฉ ุงูุจูุฏ" (ูู ุงูููุชุจุฉ ุงููุนูุงุฑูุฉ) ู"ุฃุณุนุงุฑ ุงูุณูู" (ูู ุงููุตุงุฏุฑ) ู"ูููุงุช ุงููุดุฑูุน" (ูู ุงููุณุชุฎุฏู).

ููุฏ ุตููุช ุงูุฃุนูุฏุฉ ูุชุชูุงูู ูุน ูุนูุงุฑ `SYS_SCHEMA_RULES` ุงูุฐู ุงุนุชูุฏูุงู.

---

# ๐๏ธ ูููู ุฌุฏูู: T_BOQ_BREAKDOWN

ูุฌุจ ุชุนุฑูู ูุฐู ุงูุฃุนูุฏุฉ ูู ุฌุฏูู `SYS_SCHEMA_RULES` ุชุญุช `ENTITY_KEY = T_BOQ_BREAKDOWN`.

### 1. ุฃุนูุฏุฉ ุงููููุฉ ูุงูุฑุจุท (Identity & Linking)
ูุฐู ุงูุฃุนูุฏุฉ ุชุญุฏุฏ "ูุง ูุฐุง ุงูุณุทุฑุ" ู "ุฅูู ูู ููุชููุ".

| ATTRIBUTE_KEY | DISPLAY_HEADER | SEMANTIC_ROLE | DATA_TYPE | IS_PK | ูุตู ุงูุฏูุฑ |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **`ROW_ID`** | **ID** | `NONE` | `TEXT` | `TRUE` | ูุนุฑู ูุฑูุฏ ููู ุณุทุฑ ุชุญููู (AutoGUID). |
| **`PARENT_ITEM_CODE`** | **ููุฏ ุงูุจูุฏ** | `GROUP_ID` | `TEXT` | `FALSE` | ููุฏ ุงูุจูุฏ ุงูุฃุตูู ูู ุงูููุงูุณุฉ (ูุซู `CONC_C30`). ูุฌูุน ูู ููููุงุช ุงูุจูุฏ ุชุญุชู. |
| **`RESOURCE_TYPE`** | **ุงูููุน** | `DISCRIMINATOR`| `TEXT` | `FALSE` | ููุน ุงููููู (`MAT`, `LAB`, `EQ`). ูุณุชุฎุฏูู ุงููุธุงู ูุชุญุฏูุฏ ุงูุฌุฏูู ุงูุฐู ุณูุฌูุจ ููู ุงูุณุนุฑ. |
| **`RESOURCE_REF_ID`** | **ููุฏ ุงูููุฑุฏ** | `REF_ID` | `TEXT` | `FALSE` | ุงูููุฏ ูู ุฌุฏูู ุงููุตุฏุฑ (ูุซู `M-101` ููุฃุณููุช). |

### 2. ุฃุนูุฏุฉ ุงูุจูุงูุงุช ุงููุตููุฉ (Descriptive Data)
ุจูุงูุงุช ูููุฑุงุกุฉ ูุงููููุ ูุชู ูุณุฎูุง ุบุงูุจุงู ูู ุงููุตุฏุฑ ูุชุณุฑูุน ุงูุนุฑุถ.

| ATTRIBUTE_KEY | DISPLAY_HEADER | SEMANTIC_ROLE | DATA_TYPE | ูุตู ุงูุฏูุฑ |
| :--- | :--- | :--- | :--- | :--- |
| **`DISPLAY_NAME`** | **ุงูุจูุงู** | `NAME` | `TEXT` | ุงุณู ุงูุฎุงูุฉ ุฃู ุงูุนุงูู (ูุซู "ุฃุณููุช ุจูุฑุชูุงูุฏู"). |
| **`UOM`** | **ุงููุญุฏุฉ** | `UNIT` | `TEXT` | ูุญุฏุฉ ููุงุณ ุงููููู (ุทูุ ูููุ ู3). |

### 3. ุฃุนูุฏุฉ ุงููุฏุฎูุงุช ูุงููุนุงููุงุช (Inputs & Factors)
ุงูุฃุฑูุงู ุงูุชู ุชุดูู "ุงููุตูุฉ" (Recipe). ุชุฃุชู ูู ุงูููุชุจุฉ ุงููุนูุงุฑูุฉ ุฃู ูุนุฏููุง ุงููุณุชุฎุฏู.

| ATTRIBUTE_KEY | DISPLAY_HEADER | SEMANTIC_ROLE | DATA_TYPE | LOGIC_CONFIG (JSON) |
| :--- | :--- | :--- | :--- | :--- |
| **`CONSUMPTION_RATE`**| **ูุนุฏู ุงูุงุณุชููุงู**| `QTY_UNIT` | `DECIMAL` | `{"Default": 1, "Mandatory": true}`<br>ูููุฉ ุงููููู ูู ุงููุชุฑ ุงููุงุญุฏ (ูุซูุงู 0.350 ุทู ุฃุณููุช). |
| **`WASTE_PCT`** | **ูุณุจุฉ ุงููุงูู %** | `WASTE` | `DECIMAL` | `{"Default": 0, "Format": "0%"}`<br>ูุณุจุฉ ุงููุงูู (ูุซูุงู 0.05). |
| **`PROD_RATE`** | **ุงูุฅูุชุงุฌูุฉ** | `PRODUCTIVITY`| `DECIMAL` | `{"Default": 1}`<br>ููุนูุงูุฉ ูุงููุนุฏุงุช (ูุซูุงู 15 ู3/ููู). |
| **`NUM_OF_CREWS`** | **ุงูุนุฏุฏ/ุงูุทุงูู** | `COUNT` | `DECIMAL` | `{"Default": 1}`<br>ุนุฏุฏ ุงูุนูุงู ุฃู ุงููุนุฏุงุช. |

### 4. ุฃุนูุฏุฉ ุงูุชูููุฉ ูุงูุญุณุงุจุงุช (Cost & Calculations)
ููุง ูุญุฏุซ ุงูุณุญุฑ. ุจุนุถูุง ูุฃุชู ูู ุงูุฏุงุชุงุจูุฒ (Base) ูุจุนุถูุง ููุญุณุจ (Final).

| ATTRIBUTE_KEY | DISPLAY_HEADER | SEMANTIC_ROLE | DATA_TYPE | LOGIC_CONFIG (JSON) |
| :--- | :--- | :--- | :--- | :--- |
| **`BASE_RATE`** | **ุงูุณุนุฑ ุงูุฃุณุงุณู** | `PRICE_BASE` | `DECIMAL` | `{"Format": "#,##0.00"}`<br>ุงูุณุนุฑ ุงูุฎุงู ุงููุงุฏู ูู ุฌุฏูู ุงููุตุฏุฑ (ุจุฏูู ูุงูู ุฃู ููู). |
| **`FINAL_RATE`** | **ุณุนุฑ ุงููุญุฏุฉ ุดุงูู**| `PRICE_FINAL` | `DECIMAL` | `{"Virtual": true, "Formula": "=( [BASE_RATE] * (1+[WASTE_PCT]) )"}`<br>ุงูุณุนุฑ ุจุนุฏ ุฅุถุงูุฉ ุงููุงูู (ููุฎุงูุงุช) ุฃู ุจุนุฏ ุงููุณูุฉ ุนูู ุงูุฅูุชุงุฌูุฉ (ููุนูุงูุฉ). |
| **`TOTAL_COST`** | **ุฅุฌูุงูู ุงูุชูููุฉ** | `TOTAL` | `DECIMAL` | `{"Virtual": true, "Formula": "=[FINAL_RATE] * [CONSUMPTION_RATE]", "Summary": "SUM"}`<br>ุญุตุฉ ูุฐุง ุงููููู ูู ุณุนุฑ ุงููุชุฑ ุงูููุนุจ. |

### 5. ุฃุนูุฏุฉ ุงูุชุญูู ูุญุงูุฉ ุงููุธุงู (Control Flags)
ูุฅุฏุงุฑุฉ ุชุนุฏููุงุช ุงููุณุชุฎุฏู ูุญูุงูุฉ ุงูุจูุงูุงุช.

| ATTRIBUTE_KEY | DISPLAY_HEADER | SEMANTIC_ROLE | DATA_TYPE | ูุตู ุงูุฏูุฑ |
| :--- | :--- | :--- | :--- | :--- |
| **`IS_MANUAL`** | **ูุฏููุ** | `FLAG` | `BOOL` | ุฅุฐุง ุนุฏู ุงููุณุชุฎุฏู ุงูุณุนุฑ ูุฏููุงูุ ุชุตุจุญ `TRUE` ูููุน ุงูุชุญุฏูุซ ุงูุชููุงุฆู ูู ูุณุญู. |
| **`NOTES`** | **ููุงุญุธุงุช** | `NONE` | `TEXT` | ููุงุญุธุงุช ุงููุณุชุฎุฏู ุงูุญุฑุฉ. |
| **`SOURCE_TAG`** | **ุงููุตุฏุฑ** | `TAG` | `TEXT` | ูุชุฐููุฑ ุงููุณุชุฎุฏู ูู ุฃูู ุฌุงุก ูุฐุง ุงูุณุนุฑ (ูุซูุงู: "ุณูู ูุญูู", "ููุชุจุฉ"). |

---

### ููุฎุต ุงูุณููุงุฑูู (ููู ุชุชูุงุนู ูุฐู ุงูุฃุนูุฏุฉุ)

1.  **ุงูุฎุงูุงุช (Materials):**
    *   `FINAL_RATE` = `BASE_RATE` * (1 + `WASTE_PCT`)
    *   (ุงูุณุนุฑ ุดุงูู ุงููุงูู).
2.  **ุงูุนูุงูุฉ (Labor):**
    *   ููุง ูุญุชุงุฌ ููุนุงุฏูุฉ ูุฎุชููุฉุ ูุฐุง ุณูุณุชุฎุฏู **`SYS_TRANSFORM_MAPS`** ููููู ูููุธุงู:
    *   ุฅุฐุง ูุงู `RESOURCE_TYPE = 'LAB'`ุ ูุฅู:
    *   `FINAL_RATE` = (`BASE_RATE` * `NUM_OF_CREWS`) / `PROD_RATE`.

ูุฐุง ุงูุฌุฏูู ูุบุทู ูู ุดูุก: (ุงูุฑุจุทุ ุงููุตูุฉุ ุงูุณุนุฑุ ุงููุงููุ ุงูุฅูุชุงุฌูุฉุ ูุงูุชุนุฏูู ุงููุฏูู).


ุณุคุงู ุฐูู ุฌุฏุงู ููู ุงูุตููู.

ุงูุฅุฌุงุจุฉ ุงููุตูุฑุฉ: **ุงูุฌุฏูู ููุณู (`T_BOQ_BREAKDOWN`) "ุฃุนูู" (Dumb Storage)**ุ ูู ูุฌุฑุฏ ูุฎุฒู ููุจูุงูุงุช ููุง ูุนุฑู ุดูุฆุงู ุนู ุงูุฌุฏุงูู ุงูุฃุฎุฑู.

ููููุ **ุงููุธุงู (The System)** ูู ุงูุฐู ูุนููุ ูุฐูู ูู ุฎูุงู ุงูุฌุฏูู ุงูุฎุงูุณ **`SYS_DATA_MODEL`**.

ุฏุนูู ุฃุดุฑุญ ูู ููู ูุชู ูุฐุง "ุงูุชูุฌูู ุงูุฐูู" (Traffic Routing) ููุจูุงูุงุชุ ูููู ููุฑู ุงููุธุงู ุจูู ุฎุงูุฉ ููุนุฏุฉ ูุทุงูู ุนูู ูุงูุชุงุฌูุฉ.

---

### ุงูุณุฑ ูููู ูู ุนููุฏ `RESOURCE_TYPE`

ูู ุฌุฏูู `T_BOQ_BREAKDOWN`ุ ูุฏููุง ุนููุฏ ุงุณูู **`RESOURCE_TYPE`**. ูุฐุง ุงูุนููุฏ ูู "ุงูููุชุงุญ" (Discriminator).

*   ุฅุฐุง ูุงูุช ุงููููุฉ **`MAT`** -> ุงููุธุงู ูููู: "ูุฌุจ ุฃู ุฃุฐูุจ ูุฌุฏูู ุงูุฎุงูุงุช".
*   ุฅุฐุง ูุงูุช ุงููููุฉ **`EQ`** -> ุงููุธุงู ูููู: "ูุฌุจ ุฃู ุฃุฐูุจ ูุฌุฏูู ุงููุนุฏุงุช".
*   ุฅุฐุง ูุงูุช ุงููููุฉ **`CREW`** -> ุงููุธุงู ูููู: "ูุฌุจ ุฃู ุฃุฐูุจ ูุฌุฏูู ุฃุทูู ุงูุนูู".
*   ุฅุฐุง ูุงูุช ุงููููุฉ **`PROD`** -> ุงููุธุงู ูููู: "ูุฌุจ ุฃู ุฃุฐูุจ ูุฌุฏูู ูุนุฏูุงุช ุงูุฅูุชุงุฌ".

### ูู ุงูุฐู ูุฎุจุฑ ุงููุธุงู ุจูุฐู ุงูููุงุนุฏุ
ุฅูู ุงูุฌุฏูู ุงูุฎุงูุณ: **`SYS_DATA_MODEL`**.

ูุฌุจ ุฃู ูููุฃ `SYS_DATA_MODEL` ุจูุฐู ุงูุนูุงูุงุช ููู ูุฑุจุท `T_BOQ_BREAKDOWN` ุจูู ูุฐู ุงูุฌุฏุงูู ุงููุฎุชููุฉ.

ุฅููู ููู ุณูุจุฏู ุฌุฏูู ุงูุนูุงูุงุช ููุฏุนู ูู ุงูุฌุฏุงูู ุงูุชู ุฐูุฑุชูุง:

#### ุฅุนุฏุงุฏ `SYS_DATA_MODEL` (ุฎุฑูุทุฉ ุงูุชูุฌูู):

| RELATION_KEY | PARENT | CHILD | TYPE | JOIN_CONFIG (JSON) |
| :--- | :--- | :--- | :--- | :--- |
| **`LINK_TO_MAT`** | `T_BOQ_BREAKDOWN` | **`T_MATERIALS`** | `POLYMORPHIC` | `{"DiscriminatorCol": "RESOURCE_TYPE", "DiscriminatorVal": "MAT", "ChildCol": "MAT_ID"}` |
| **`LINK_TO_EQ`** | `T_BOQ_BREAKDOWN` | **`T_EQUIPMENT`** | `POLYMORPHIC` | `{"DiscriminatorCol": "RESOURCE_TYPE", "DiscriminatorVal": "EQ", "ChildCol": "EQ_ID"}` |
| **`LINK_TO_CREW`** | `T_BOQ_BREAKDOWN` | **`T_LABOR_CREWS`** | `POLYMORPHIC` | `{"DiscriminatorCol": "RESOURCE_TYPE", "DiscriminatorVal": "CREW", "ChildCol": "CREW_ID"}` |
| **`LINK_TO_PROD`** | `T_BOQ_BREAKDOWN` | **`T_PROD_RATES`** | `POLYMORPHIC` | `{"DiscriminatorCol": "RESOURCE_TYPE", "DiscriminatorVal": "PROD", "ChildCol": "TASK_ID"}` |

---

### ุณููุงุฑูู ุงูุนูู (ููู ูุฌูุน ุงูููุฏ ุงูุจูุงูุงุชุ)

ุนูุฏูุง ูุทูุจ ุงููุณุชุฎุฏู ุนุฑุถ ุชุญููู ุจูุฏ "ุตุจ ุฎุฑุณุงูุฉ"ุ ุงูููุฏ ูููู ุจุงูุชุงูู:

1.  ููุฑุฃ ุงูุณุทุฑ ุงูุฃูู ูู `T_BOQ_BREAKDOWN`.
2.  ูุฌุฏ `RESOURCE_TYPE` = **"MAT"** ู `RESOURCE_REF_ID` = **"CEM-01"**.
3.  ูุฐูุจ ูุฌุฏูู ุงูุนูุงูุงุชุ ูุณุฃู: "ูู ูู ุงูุฌุฏูู ุงููุณุคูู ุนู MATุ".
4.  ุงูุฌุฏูู ูุฑุฏ: "ุฅูู `T_MATERIALS`".
5.  ุงูููุฏ ูููุฐ: `SELECT Price FROM T_MATERIALS WHERE MAT_ID = 'CEM-01'`.

---

6.  ููุฑุฃ ุงูุณุทุฑ ุงูุซุงูู.
7.  ูุฌุฏ `RESOURCE_TYPE` = **"CREW"** ู `RESOURCE_REF_ID` = **"C-CONC"**.
8.  ูุฐูุจ ูุฌุฏูู ุงูุนูุงูุงุชุ ูุณุฃู: "ูู ูู ุงูุฌุฏูู ุงููุณุคูู ุนู CREWุ".
9.  ุงูุฌุฏูู ูุฑุฏ: "ุฅูู `T_LABOR_CREWS`".
10. ุงูููุฏ ูููุฐ: `SELECT Daily_Rate FROM T_LABOR_CREWS WHERE CREW_ID = 'C-CONC'`.

---

### ูุงุฐุง ุนู ุฌุฏุงูู ุงูุฅูุชุงุฌูุฉ ุงููููุตูุฉุ

ุฃูุช ุฐูุฑุช ููุทุฉ ูููุฉ: *"ุฌุฏูู ูุงูุชุงุฌูุฉ ุงูุนูุงูุฉ ูุฌุฏูู ูุงูุชุงุฌูุฉ ุงููุนุฏุงุช"*.

ุนุงุฏุฉุ ุงูุฅูุชุงุฌูุฉ ุชููู ุฑููุงู (ูุซูุงู 20 ูุชุฑ/ููู) ูููุณ ุณุทุฑุงู ูู ุณุนุฑ. ูุฐุง ูุฏููุง ุฎูุงุฑุงู ููุชุนุงูู ูุนูุง:

**ุงูุฎูุงุฑ ุงูุฃูุถู:**
ุฃู ุชููู ุงูุฅูุชุงุฌูุฉ ุนููุฏุงู ุฏุงุฎู ุฌุฏูู `T_LABOR_CREWS` ุฃู `T_EQUIPMENT`.

**ุงูุฎูุงุฑ ุงููุชูุฏู (ุฅุฐุง ูุงูุช ุฌุฏุงูู ูููุตูุฉ ููุง ุทูุจุช):**
ูุฌุนู ุงูููุฏ ูููู ุจู **"ุจุญุซ ุซุงููู" (Secondary Lookup)**.
ุจูุนููุ ููุญู ูุญุณุจ ุชูููุฉ ุงูู Crewุ ุงููุธุงู ูุฐูุจ ูุฌุฏูู `T_PROD_RATES` ููุฌูุจ ูุนุฏู ุงูุฅูุชุงุฌ ุจูุงุกู ุนูู ููุน ุงูุนูู.

ูุชู ุชุนุฑูู ูุฐุง ุฃูุถุงู ูู `SYS_DATA_MODEL` ูุนูุงูุฉ ูุจุงุดุฑุฉ (`DIRECT`) ุจูู ุฌุฏูู "ุงูุฃุทูู" ูุฌุฏูู "ุงูุฅูุชุงุฌูุฉ".

### ุงูุฎูุงุตุฉ

ูุนูุ ุงููุธุงู ูุตูู ููุณุชูุนุจ **ุฃู ุนุฏุฏ ูู ุงูุฌุฏุงูู ุงููุฑุนูุฉ** (ุฎุงูุงุชุ ูุนุฏุงุชุ ููุงููููุ ูููุ ุงูุชุงุฌูุงุช..).
ุงูุดุฑุท ุงููุญูุฏ ูู:
1.  ุฃู ุชุนุฑู ูู ุฌุฏูู ูู `SYS_DEFINITIONS`.
2.  ุฃู ุชุถูู ูู ูุงุนุฏุฉ ุชูุฌูู ูู `SYS_DATA_MODEL` ุชุฑุจุท "ุงูููุน" (Type) ุจู "ุงูุฌุฏูู" (Table).
