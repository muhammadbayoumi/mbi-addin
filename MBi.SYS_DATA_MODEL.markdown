

# ๐  : SYS_DATA_MODEL

ูู ุจุฅูุดุงุก Google Sheet ุจูุฐุง ุงูุงุณู.

### ุฃููุงู: ุงูุฃุนูุฏุฉ ุงูุตุฑูุญุฉ (Core Logic Columns)
ูุฐู ุงูุฃุนูุฏุฉ ุชุญุฏุฏ ุฃุทุฑุงู ุงูุนูุงูุฉ ูููุนูุง.

| # | ุงุณู ุงูุนููุฏ (Header) | ุงูููุน | ุงููุตู ูุงูุฏูุฑ | ุฃูุซูุฉ (Values) |
| :--- | :--- | :--- | :--- | :--- |
| **1** | **`RELATION_KEY`** | `String` | **ุงููุนุฑู ุงููุฑูุฏ ููุนูุงูุฉ (PK).**<br>ุงุณู ูุตู ุงูุนูุงูุฉ. | `REL_BOQ_MAT`<br>`REL_BOQ_LAB` |
| **2** | **`PARENT_ENTITY_KEY`** | `String` | **ุงูุฌุฏูู ุงูุฑุฆูุณู (ุงูุฃุจ).** (FK)<br>ุงูุฌุฏูู ุงูุฐู ูุญุชูู ุนูู "ุงูุชุฌููุนุฉ" (ูุซู ุฌุฏูู ุชุญููู ุงูุจููุฏ). | `T_BOQ_BREAKDOWN` |
| **3** | **`CHILD_ENTITY_KEY`** | `String` | **ุงูุฌุฏูู ุงููุฑุนู (ุงูุงุจู/ุงููุตุฏุฑ).** (FK)<br>ุงูุฌุฏูู ุงูุฐู ูุฌูุจ ููู ุงูุณุนุฑ ุฃู ุงูุจูุงูุงุช. | `T_MATERIALS`<br>`T_LABOR` |
| **4** | **`RELATION_TYPE`** | `String` | **ููุน ุงูุฑุจุท.**<br>โข **`DIRECT`**: ุฑุจุท ูุจุงุดุฑ ุฏุงุฆู (ูุซู VLOOKUP).<br>โข **`POLYMORPHIC`**: ุฑุจุท ูุดุฑูุท (ุฅุฐุง ูุงู ุงูููุน "ุฎุงูุฉ" ุงุฐูุจ ูุฌุฏูู ุงูุฎุงูุงุช). | `DIRECT`<br>`POLYMORPHIC` |
| **5** | **`IS_ACTIVE`** | `Bool` | **ุงูุชูุนูู.** | `TRUE`, `FALSE` |

---

### ุซุงููุงู: ุฃุนูุฏุฉ ุงูุฅุนุฏุงุฏุงุช (Configuration Bags)

#### ุงูุนููุฏ 6: `JOIN_CONFIG` (ููู ูุฑุจุทุ)
ูุญุฏุฏ ุงูุฃุนูุฏุฉ ุงููุณุชุฎุฏูุฉ ูู ุงูุฑุจุท ูุงูุดุฑูุท.

| ุงูููุชุงุญ (Key) | ุงููุตู | ูุซุงู |
| :--- | :--- | :--- |
| **`"ParentCol"`** | ุนููุฏ ุงูุฑุจุท ูู ุงูุฌุฏูู ุงูุฑุฆูุณู. | `"RESOURCE_REF_ID"` |
| **`"ChildCol"`** | ุนููุฏ ุงูุฑุจุท ูู ุงูุฌุฏูู ุงููุฑุนู (ุบุงูุจุงู PK). | `"MAT_ID"` |
| **`"DiscriminatorCol"`** | **(ููุฑุจุท ุงููุดุฑูุท)** ุงุณู ุงูุนููุฏ ุงูุฐู ูุฎุชุจุฑ ูููุชู. | `"RESOURCE_TYPE"` |
| **`"DiscriminatorVal"`** | **(ููุฑุจุท ุงููุดุฑูุท)** ุงููููุฉ ุงูุชู ุชูุนู ูุฐู ุงูุนูุงูุฉ. | `"MAT"`, `"LAB"` |

#### ุงูุนููุฏ 7: `CALC_CONFIG` (ููู ูุญุณุจุ)
ูุญุฏุฏ ูุนุงุฏูุฉ ุงูุชูููุฉ ููุฐุง ุงูููุน ูู ุงูุนูุงูุงุช.

| ุงูููุชุงุญ (Key) | ุงููุตู | ูุซุงู |
| :--- | :--- | :--- |
| **`"Method"`** | ุงูุทุฑููุฉ ุงูุฑูุงุถูุฉ.<br>โข `MULTIPLY`: (Qty * Price).<br>โข `DIVIDE`: (Rate / Prod).<br>โข `LOOKUP`: ุฌูุจ ุจูุงูุงุช ููุท. | `"MULTIPLY"`, `"DIVIDE"` |
| **`"SemanticRole"`** | ุฏูุฑ ูุฐู ุงูุนูุงูุฉ ูู ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ. | `"COST"`, `"TIME"` |
| **`"LogicKey"`** | ุงุณู ูุนุงุฏูุฉ ุฎุงุตุฉ (ุฅุฐุง ูุฒู ุงูุฃูุฑ). | `"CALC_WASTE_5%"` |

---

### ุซุงูุซุงู: ุฃูุซูุฉ ุนูููุฉ ููุชุนุจุฆุฉ (ุณููุงุฑูู ุงูู Breakdown ุงููุงูู)

ูููุชุฑุถ ุฃู ุฌุฏูู `T_BOQ_BREAKDOWN` ูุญุชูู ุนูู ุนููุฏ `TYPE` (ููุน ุงูููุฑุฏ) ูุนููุฏ `REF_ID` (ููุฏ ุงูููุฑุฏ).

#### ุงูุณููุงุฑูู 1: ุฑุจุท ุงูุฎุงูุงุช (ุนูุงูุฉ ูุดุฑูุทุฉ - ุถุฑุจ)
ูููู ูููุธุงู: "ุฅุฐุง ูุงู ุงูููุน **MAT**ุ ุงุฐูุจ ูุฌุฏูู **Materials**ุ ูุงุถุฑุจ ุงูุณุนุฑ ูู ุงููููุฉ".

*   **RELATION_KEY:** `REL_BOQ_MAT`
*   **PARENT_ENTITY_KEY:** `T_BOQ_BREAKDOWN`
*   **CHILD_ENTITY_KEY:** `T_MATERIALS`
*   **RELATION_TYPE:** `POLYMORPHIC`
*   **JOIN_CONFIG:**
    ```json
    {
      "ParentCol": "REF_ID",
      "ChildCol": "MAT_ID",
      "DiscriminatorCol": "TYPE",
      "DiscriminatorVal": "MAT"
    }
    ```
*   **CALC_CONFIG:**
    ```json
    {
      "Method": "MULTIPLY",
      "SemanticRole": "COST"
    }
    ```

#### ุงูุณููุงุฑูู 2: ุฑุจุท ุงูุนูุงูุฉ (ุนูุงูุฉ ูุดุฑูุทุฉ - ูุณูุฉ)
ูููู ูููุธุงู: "ุฅุฐุง ูุงู ุงูููุน **LAB**ุ ุงุฐูุจ ูุฌุฏูู **Labor**ุ ูุงูุณู ุงูููููุฉ ุนูู ุงูุฅูุชุงุฌูุฉ".

*   **RELATION_KEY:** `REL_BOQ_LAB`
*   **PARENT_ENTITY_KEY:** `T_BOQ_BREAKDOWN`
*   **CHILD_ENTITY_KEY:** `T_LABOR`
*   **RELATION_TYPE:** `POLYMORPHIC`
*   **JOIN_CONFIG:**
    ```json
    {
      "ParentCol": "REF_ID",
      "ChildCol": "LAB_ID",
      "DiscriminatorCol": "TYPE",
      "DiscriminatorVal": "LAB"
    }
    ```
*   **CALC_CONFIG:**
    ```json
    {
      "Method": "DIVIDE",
      "SemanticRole": "COST"
    }
    ```

#### ุงูุณููุงุฑูู 3: ุฑุจุท ุงูููุฑุฏ (ุนูุงูุฉ ูุจุงุดุฑุฉ - ุจุญุซ)
ูููู ูููุธุงู: "ุฏุงุฆูุงู ุงุฑุจุท ุนููุฏ `VENDOR_ID` ุจุฌุฏูู ุงูููุฑุฏูู ูุฌูุจ ุงุณู ุงูููุฑุฏ".

*   **RELATION_KEY:** `REL_MAT_VENDOR`
*   **PARENT_ENTITY_KEY:** `T_MATERIALS` *(ูุงุญุธ: ููุง ุงูุฎุงูุงุช ูู ุงูุฃุจ)*
*   **CHILD_ENTITY_KEY:** `LST_VENDORS`
*   **RELATION_TYPE:** `DIRECT`
*   **JOIN_CONFIG:**
    ```json
    {
      "ParentCol": "VENDOR_ID",
      "ChildCol": "ID"
    }
    ```
*   **CALC_CONFIG:**
    ```json
    {
      "Method": "LOOKUP"
    }
    ```

---

### ุงูุฎูุงุตุฉ: ููู ูุนูู "ุงููุฎ" ุงูุขูุ

ุนูุฏูุง ูููู ุงูููุฏ ุจุญุณุงุจ ุชูููุฉ ุจูุฏ ูู `T_BOQ_BREAKDOWN`:
1.  ููุฑ ุนูู ูู ุณุทุฑ.
2.  ููุฑุฃ `TYPE`. ุฅุฐุง ูุงู `MAT`:
    *   ูุณุชุฎุฏู `REL_BOQ_MAT`.
    *   ูุนุฑู ุฃูู ูุฌุจ ุฃู ูุถุฑุจ ุงููููุฉ ูู ุงูุณุนุฑ ุงููุงุฏู ูู `T_MATERIALS`.
3.  ุฅุฐุง ูุงู `LAB`:
    *   ูุณุชุฎุฏู `REL_BOQ_LAB`.
    *   ูุนุฑู ุฃูู ูุฌุจ ุฃู ููุณู ุงูุณุนุฑ ุนูู ุงูุฅูุชุงุฌูุฉ ุงููุงุฏูุฉ ูู `T_LABOR`.

**ุจูุฐุง ุงูุฌุฏููุ ุงูุชููุช ุงูููุธููุฉ (The Ecosystem) ูุฃุตุจุญุช ุฌุงูุฒุฉ ุชูุงูุงู ููุนูู.**
